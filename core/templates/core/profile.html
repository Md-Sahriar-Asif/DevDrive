{% extends "base.html" %} 

{% block content %}

<style>
:root {
    --primary-color: #10b981;
    --primary-dark: #059669;
    --secondary-color: #14b8a6;
    --accent-color: #06b6d4;
    --text-dark: #0f172a;
    --text-light: #64748b;
}

body {
    background-color: #f8fafc;
}

.card {
    border: none;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    background: white;
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 24px rgba(16, 185, 129, 0.25), 0 6px 12px rgba(0, 0, 0, 0.15);
}

.card-img-top {
    height: 200px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.card:hover .card-img-top {
    transform: scale(1);
}

.rounded-circle {
    border: 4px solid var(--primary-color);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-color) 100%);
}

.btn-secondary {
    background: linear-gradient(135deg, #64748b 0%, #475569 100%);
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    color: white;
}

.btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(100, 116, 139, 0.4);
}

.btn-info {
    background: linear-gradient(135deg, var(--accent-color) 0%, var(--secondary-color) 100%);
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    color: white;
}

.btn-info:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(6, 182, 212, 0.4);
}

.btn-danger {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    color: white;
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(239, 68, 68, 0.4);
}

.text-secondary {
    color: var(--text-light) !important;
}

.text-muted {
    color: var(--secondary-color) !important;
    font-weight: 600;
}

h4, h5, h6 {
    color: var(--text-dark);
    font-weight: 700;
}

hr {
    border-top: 2px solid #e2e8f0;
    opacity: 1;
}

.blog-container {
    border: none !important;
    background: #f8fafc;
    padding: 1.5rem;
    border-radius: 12px;
}

.blog-container h5 {
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid var(--primary-color);
    display: inline-block;
}

.icons{
    width: auto;
    padding: 10px 10px 10px 10px;
}

.icons i{
    font-size: 20px;
    cursor: pointer;
    margin: 5px 5px 5px 5px
}

.icons a{
    color: var(--text-dark);
}

.actions a{
    color: var(--primary-color) !important;
    transition: all 0.3s ease;
}

.actions a:hover{
    color: var(--primary-dark) !important;
    transform: scale(1.1);
}

.actions a .fa-solid{
    font-size: 20px !important;
    margin-right: 10px;
}

.alert-danger {
    background: #fee2e2;
    border: none;
    border-left: 4px solid #dc2626;
    border-radius: 8px;
    color: #991b1b;
}

.card-body {
    overflow: hidden;
}

.main-body {
    margin-top: 2rem;
}
</style>

<div class="container">

{% if del %}
<br>
    <div class="alert alert-danger" role="alert">
      <p>Do you want to delete the article <strong>{{blog.title}}</strong> </p>
      <form action="" method="POST">
        {% csrf_token %}
        <span>
          <a href="{% url 'profile' %}" class="btn btn-secondary">Cancel</a>
          <a href=""><button class="btn btn-danger">Delete</button></a>
        </span>
      </form>
    </div>

{% endif %}

    <div class="main-body">
          <!-- Breadcrumb -->
          <nav aria-label="breadcrumb" class="main-breadcrumb">
            <ol class="breadcrumb"></ol>
          </nav>

          <!-- /Breadcrumb -->
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">

                    {% if user.profile_pic %}
                        <img src="{{user.profile_pic.url}}" alt="Admin" class="rounded-circle" width="150">
                    {% else %}
                        <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
                    {% endif %}

                    <div class="mt-3">
                      <h4>{{user.first_name}} {{user.last_name}}</h4>
                      <p class="text-secondary mb-1">{{user.role}}</p>
                      <p class="text-muted font-size-sm">{{user.address}}</p>

                      <p><strong>{{ user.followers.count }}</strong> Followers</p>

                      {% if not is_own_profile %}
                        <a href="{% url 'follow-user' user.username %}"
                           class="btn {% if is_following %}btn-secondary{% else %}btn-primary{% endif %}">
                          {% if is_following %}Unfollow{% else %}Follow{% endif %}
                        </a>
                      {% endif %}

                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Bio</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.bio}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.email}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Phone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.phone}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Username</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.username}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Address</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.address}}
                    </div>
                  </div>
                  <hr>
                  {% if is_own_profile %}
                    <div class="row">
                      <div class="col-sm-12">
                        <a class="btn btn-info " target="__blank" href="{% url 'update-profile' %}">Edit</a>
                      </div>
                    </div>
                  {% endif %}
                </div>
              </div>

              <div class="container blog-container">

                {% if is_own_profile %}
                  <h5>My Articles</h5>
                {% else %}
                  <h5>Articles</h5>
                {% endif %}

                <div class="row">
                  {% for blog in blogs  %}
                  <div class="col-md-6">
                    <div class="card mb-4">
                      <a href="#!"><img class="card-img-top" src="{{blog.thumbnail.url}}" alt="..." /></a>
                      <div class="card-body">
                          <div class="small text-muted">{{blog.created}}</div>
                          <h2 class="card-title h4">{{blog.title}}</h2>
                          <p class="card-text">{{blog.body | safe | truncatechars:"100"}}</p>
                          <a class="btn btn-primary" href="{% url 'detail' slug=blog.slug %}">Read more â†’</a>

                          {% if is_own_profile %}
                            <span style="float: right" class="actions">
                              <a href="{% url 'update-article' blog.slug %}"><i class="fa-solid fa-pen-to-square"></i></a>
                              <a href="{% url 'delete-article' blog.slug %}"><i class="fa-solid fa-trash-can"></i></a>
                            </span>
                          {% endif %}
                      </div>
                    </div>
                  </div>
                    
                  {% endfor %}
                    
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>

{% endblock content %}